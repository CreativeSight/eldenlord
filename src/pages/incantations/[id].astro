---
import Item from "../../components/Item.astro";
import Layout from "../../layouts/Layout.astro";
import { getData } from "../../utils/getData";

type Data = {
  cost: number;
  description: string;
  effects: string;
  image: string;
  id: string;
  name: string;
  slots: number;
  requires: Requires;
  type: string;
};

type Requires = {
  amount: never;
  name: string;
};

export async function getStaticPaths() {
  const data = await getData("incantations");

  return data?.map(
    ({
      cost,
      description,
      effects,
      image,
      id,
      name,
      slots,
      requires,
      type,
    }: Data) => {
      return {
        params: { id },
        props: {
          cost,
          description,
          effects,
          image,
          id,
          name,
          slots,
          requires,
          type,
        },
      };
    }
  );
}
---

<Layout pageTitle={Astro.props.name} title={Astro.props.name}>
  <Item {...Astro.props} />
</Layout>
