---
import type Card from "../../components/Card.astro";
import Item from "../../components/Item.astro";
import Layout from "../../layouts/Layout.astro";
import { getData } from "../../utils/getData";

type Data = {
  attack: Attack;
  category: string;
  defence: Defence;
  description: string;
  image: string;
  id: string;
  name: string;
  passive: string;
  requiredAttributes: RequiredAttributes;
  scalesWith: ScalesWith;
  weight: number;
};

type Attack = {
  amount: number;
  name: string;
};

type Defence = {
  amount: number;
  name: string;
};

type RequiredAttributes = {
  amount: number;
  name: string;
};

type ScalesWith = {
  name: string;
  scaling: string;
};

export async function getStaticPaths() {
  const data = await getData("weapons");

  return data?.map(
    ({
      attack,
      category,
      defence,
      description,
      image,
      id,
      name,
      passive,
      requiredAttributes,
      scalesWith,
      weight,
    }: Data) => ({
      params: { id },
      props: {
        attack,
        category,
        defence,
        description,
        image,
        id,
        name,
        passive,
        requiredAttributes,
        scalesWith,
        weight,
      },
    })
  );
}
---

<Layout pageTitle={Astro.props.name} title={Astro.props.name}>
  <Item {...Astro.props} />
</Layout>
